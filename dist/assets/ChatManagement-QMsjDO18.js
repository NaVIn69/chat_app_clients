import{r as t,M as d,j as r,S as w,o as u,W as C,X as N}from"./index-irexueTV.js";import{A as b}from"./AdminLayout-Bi5iCY7q.js";import{A as l}from"./AvatarCard-8JM5A-wH.js";import{T as v}from"./Table-BTKQXWHi.js";import{a as x}from"./Menu-CmgIRgBM.js";import{A as g}from"./Avatar-Cp4DZ0XV.js";import"./IconButton-DwQ1NlaF.js";import"./Modal-CTaQcr3u.js";import"./Typography-JwG0Pq1m.js";import"./ExitToApp-5YtZ6gSP.js";import"./Menu-Bt0IaSNa.js";import"./Container-B0pkiVXL.js";import"./TextField-BOKVHMeR.js";import"./isMuiElement-Bv43l1N-.js";import"./Tooltip-CVusUE4k.js";import"./Toolbar-CXjODSla.js";import"./MenuItem-DnPP-E3C.js";import"./Button-yxfB9dJ-.js";import"./InputAdornment-BnHJggO_.js";import"./CircularProgress-BdQMOYhd.js";const j=[{field:"id",headerName:"ID",headerClassName:"table-header",width:200},{field:"avatar",headerName:"Avatar",headerClassName:"table-header",width:150,renderCell:e=>r.jsx(l,{alt:e.row.name,avatar:e.row.avatar})},{field:"name",headerName:"Name",headerClassName:"table-header",width:300},{field:"groupChat",headerName:"Group",headerClassName:"table-header",width:100},{field:"totalMembers",headerName:"Total Members",headerClassName:"table-header",width:120},{field:"members",headerName:"Members",headerClassName:"table-header",width:400,renderCell:e=>r.jsx(l,{max:100,avatar:e.row.members})},{field:"totalMessages",headerName:"TotalMessages",headerClassName:"table-header",width:120},{field:"creator",headerName:"Created By",headerClassName:"table-header",width:250,renderCell:e=>r.jsxs(u,{direction:"row",alignItems:"center",spacing:"1rem",children:[r.jsx(g,{alt:e.row.creator.name,src:e.row.creator.avatar}),r.jsx("span",{children:e.row.creator.name})]})}],H=()=>{const[e,h]=t.useState([]),[n,c]=t.useState(!0),[s,p]=t.useState(null),[i,f]=t.useState(null);return t.useEffect(()=>{(async()=>{try{const a=await C.get(`${N}/api/v1/admin/chats`,{withCredentials:!0});p(a.data)}catch(a){f(a)}finally{c(!1)}})()},[]),t.useEffect(()=>{var o;s&&h((o=s==null?void 0:s.chats)==null?void 0:o.map(a=>({...a,id:a._id,avatar:a.avatar.map(m=>d(m,50)),members:a.members.map(m=>d(m.avatar,50)),creator:{name:a.creator.name,avatar:d(a.creator.avatar,50)}})))},[s]),x([{isError:i,error:i}]),r.jsx(b,{children:n?r.jsx(w,{height:"100vh"}):r.jsx(v,{heading:"All Chats",columns:j,rows:e})})};export{H as default};

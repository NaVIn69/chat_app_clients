const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ConfirmDeleteDialog-CFoJ1bq0.js","assets/index-irexueTV.js","assets/DialogTitle-BbWngXSl.js","assets/Modal-CTaQcr3u.js","assets/Menu-Bt0IaSNa.js","assets/Typography-JwG0Pq1m.js","assets/Button-yxfB9dJ-.js","assets/AddMemberDialog-C_1lQvra.js","assets/UserItem-BK1VO4-t.js","assets/ListItem-CrKAa2bw.js","assets/isMuiElement-Bv43l1N-.js","assets/Avatar-Cp4DZ0XV.js","assets/IconButton-DwQ1NlaF.js","assets/Delete-BaecR_Mp.js","assets/Menu-CmgIRgBM.js"])))=>i.map(i=>d[i]);
import{j as e,r as t,O as B,aa as Y,b as Z,u as ee,ab as re,i as se,d as oe,ac as te,a4 as h,ad as w,o as l,L as ae,ae as ne,af as ie,G as ce,ag as le}from"./index-irexueTV.js";import{A as de}from"./AvatarCard-8JM5A-wH.js";import{U as me}from"./UserItem-BK1VO4-t.js";import{b as j,a as ue,D as pe,B as xe,M as ge}from"./Menu-CmgIRgBM.js";import{c as f,T as p}from"./Typography-JwG0Pq1m.js";import{C as he}from"./CircularProgress-BdQMOYhd.js";import{B as _}from"./Modal-CTaQcr3u.js";import{I as u}from"./IconButton-DwQ1NlaF.js";import{T as je}from"./Tooltip-CVusUE4k.js";import{T as fe}from"./TextField-BOKVHMeR.js";import{B as A}from"./Button-yxfB9dJ-.js";import{A as be,D as ve}from"./Delete-BaecR_Mp.js";import"./Menu-Bt0IaSNa.js";import"./Avatar-Cp4DZ0XV.js";import"./ListItem-CrKAa2bw.js";import"./isMuiElement-Bv43l1N-.js";const Me=f(e.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done"),De=f(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Ie=f(e.jsx("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace"),ke=t.lazy(()=>B(()=>import("./ConfirmDeleteDialog-CFoJ1bq0.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Ce=t.lazy(()=>B(()=>import("./AddMemberDialog-C_1lQvra.js"),__vite__mapDeps([7,1,8,9,4,3,10,11,5,12,13,14,2,6]))),Ve=()=>{var y,L;const r=Y()[0].get("group"),n=Z(),{isAddMember:i}=ee(o=>o.misc),s=re(""),a=se({chatId:r,populate:!0},{skip:!r}),[x,b]=j(ne),[N,z]=j(ie),[R,Ge]=j(ce),[T,v]=t.useState(!1),M=oe(),[F,d]=t.useState(!1),[D,m]=t.useState(""),[I,c]=t.useState(""),[k,C]=t.useState(!1),[g,E]=t.useState([]),H=[{isError:s.isError,error:s.error},{isError:a.isError,error:a.error}];ue(H),t.useEffect(()=>{const o=a.data;return a.data&&(m(o.chat.name),c(o.chat.name),E(o.chat.members)),()=>{m(""),c(""),E([]),d(!1)}},[a.data]);const O=()=>{M("/")},P=()=>{v(o=>!o)},U=()=>{v(!1)},V=()=>{d(!1),x("Updating group Name..",{chatId:r,name:I})},$=()=>{C(!0)},G=()=>{C(!1)},K=()=>{n(le(!0))},Q=()=>{R("Deleteing Group...",r),G(),M("/groups")},W=o=>{N("Removing Member..",{chatId:r,userId:o})};t.useEffect(()=>(r&&(m(`group name ${r}`),c(`group name ${r}`)),()=>{m(""),c(""),d(!1)}),[r]);const q=e.jsxs(e.Fragment,{children:[e.jsx(xe,{sx:{display:{xs:"block",sm:"none",position:"fixed",right:"1rem",top:"1rem"}},children:e.jsx(u,{onClick:P,children:e.jsx(ge,{})})}),e.jsx(je,{title:"back",children:e.jsx(u,{sx:{position:"absolute",top:"2rem",left:"2rem",color:"white",bgcolor:"primary.main",":hover":{bgcolor:"lightBlue"}},onClick:O,children:e.jsx(Ie,{})})})]}),J=e.jsx(l,{direction:"row",spacing:"1rem",padding:"3rem",alignItems:"center",justifyContent:"center",children:F?e.jsxs(e.Fragment,{children:[e.jsx(fe,{value:I,onChange:o=>c(o.target.value)}),e.jsx(u,{onClick:V,disabled:b,children:e.jsx(Me,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{variant:"h4",children:D}),e.jsxs(u,{disabled:b,onClick:()=>d(!0),children:[" ",e.jsx(De,{})," "]})]})}),X=e.jsx(e.Fragment,{children:e.jsxs(l,{direction:{sm:"row",xs:"column-reverse"},spacing:"1rem",p:{sm:"1rem",xs:"0",md:"1rem 4rem"},children:[e.jsx(A,{size:"large",variant:"contained",startIcon:e.jsx(be,{}),onClick:K,children:"Add Member"}),e.jsx(A,{size:"large",variant:"outlined",color:"error",startIcon:e.jsx(ve,{}),onClick:$,children:"Delete Group"})]})});return s.isLoading?e.jsx(te,{}):e.jsx(e.Fragment,{children:e.jsxs(h,{container:!0,height:"100vh",children:[e.jsx(h,{item:!0,sx:{display:{xs:"none",sm:"block"},backgroundImage:w},sm:4,children:e.jsx(S,{myGroup:(y=s==null?void 0:s.data)==null?void 0:y.groups,chatId:r})}),e.jsxs(h,{item:!0,xs:12,sm:8,sx:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",padding:"1rem 3rem"},children:[q,D&&e.jsxs(e.Fragment,{children:[J,e.jsx(p,{children:"Members"}),e.jsx(l,{maxWidth:"45rem",width:"100%",boxSizing:"border-box",padding:{sm:"1rem",xs:"0",md:"1rem 4rem"},spacing:"2rem",height:"50vh",overflow:"auto",children:z?e.jsx(he,{}):g==null?void 0:g.map(o=>e.jsx(me,{user:o,isAdded:!0,styling:{boxShadow:"0 0 0.5rem  rgba(0,0,0,0.2)",padding:"1rem 2rem",borderRadius:"1rem"},handler:W},o._id))}),X]})]}),i&&e.jsx(t.Suspense,{fallback:e.jsx(_,{open:!0}),children:e.jsx(Ce,{chatId:r})}),k&&e.jsx(t.Suspense,{fallback:e.jsx(_,{open:!0}),children:e.jsx(ke,{open:k,handleClose:G,deleteHandler:Q})}),e.jsx(pe,{sx:{display:{xs:"block",sm:"none"}},open:T,onClose:U,children:e.jsx(S,{w:"50vw",myGroup:(L=s==null?void 0:s.data)==null?void 0:L.groups,chatId:r})})]})})},S=({w:r="100%",myGroup:n=[],chatId:i})=>e.jsx(l,{width:r,sx:{height:"100vh",backgroundImage:w,overflow:"auto"},children:n.length>0?n.map(s=>e.jsx(Ee,{group:s,chatId:i},s._id)):e.jsx(p,{textAlign:"center",padding:"1rem",children:"No groups"})}),Ee=t.memo(({group:r,chatId:n})=>{const{name:i,avatar:s,_id:a}=r;return e.jsx(ae,{to:`?group=${a}`,onClick:x=>{n==a&&x.preventDefault()},children:e.jsxs(l,{direction:"row",spacing:"1rem",alignItems:"center",children:[e.jsx(de,{avatar:s}),e.jsx(p,{children:i})]})})});export{Ve as default};

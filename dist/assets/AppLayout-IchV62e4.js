const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Search-Yx16P7CN.js","assets/index-irexueTV.js","assets/index-DH6ci2QH.js","assets/Menu-CmgIRgBM.js","assets/Modal-CTaQcr3u.js","assets/Typography-JwG0Pq1m.js","assets/UserItem-BK1VO4-t.js","assets/ListItem-CrKAa2bw.js","assets/Menu-Bt0IaSNa.js","assets/isMuiElement-Bv43l1N-.js","assets/Avatar-Cp4DZ0XV.js","assets/IconButton-DwQ1NlaF.js","assets/Delete-BaecR_Mp.js","assets/DialogTitle-BbWngXSl.js","assets/TextField-BOKVHMeR.js","assets/InputAdornment-BnHJggO_.js","assets/ExitToApp-5YtZ6gSP.js","assets/AvatarCard-8JM5A-wH.js","assets/Toolbar-CXjODSla.js","assets/Notifications-BCCyyApQ.js","assets/Tooltip-CVusUE4k.js","assets/Notifications-BNyzYUVM.js","assets/Button-yxfB9dJ-.js","assets/NewGroup-DKaL_awX.js"])))=>i.map(i=>d[i]);
import{v as Z,w as oo,x as so,y as E,z as f,r as c,B as to,D as eo,j as o,E as ao,F as ro,u as C,d as z,G as no,H as io,o as k,J as V,K as co,L as lo,M as po,h as ho,O as _,b as F,p as xo,P as S,Q as uo,R as go,U as mo,V as jo,W as vo,X as fo,Y as Co,Z as H,$ as ko,e as bo,a0 as Io,a1 as Ao,a2 as Bo,a3 as yo,S as G,a4 as y,a5 as O,a6 as Mo,a7 as Do,a8 as Eo,a9 as No}from"./index-irexueTV.js";import{b as R,B as A,M as zo,u as _o,a as Lo,D as To}from"./Menu-CmgIRgBM.js";import{M as Ho}from"./Menu-Bt0IaSNa.js";import{E as Go}from"./ExitToApp-5YtZ6gSP.js";import{c as B,T as v}from"./Typography-JwG0Pq1m.js";import{D as Oo,A as Ro}from"./Delete-BaecR_Mp.js";import{A as Po}from"./AvatarCard-8JM5A-wH.js";import{A as Vo}from"./Avatar-Cp4DZ0XV.js";import{P as Fo,B as N}from"./Modal-CTaQcr3u.js";import{T as So,B as $o}from"./Toolbar-CXjODSla.js";import{I as $}from"./IconButton-DwQ1NlaF.js";import{G as Uo,N as wo}from"./Notifications-BCCyyApQ.js";import{T as Wo}from"./Tooltip-CVusUE4k.js";function Qo(s){return Z("MuiAppBar",s)}oo("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const qo=["className","color","enableColorOnDark","position"],Yo=s=>{const{color:t,position:a,classes:e}=s,r={root:["root",`color${E(t)}`,`position${E(a)}`]};return ro(r,Qo,e)},M=(s,t)=>s?`${s==null?void 0:s.replace(")","")}, ${t})`:t,Jo=so(Fo,{name:"MuiAppBar",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:a}=s;return[t.root,t[`position${E(a.position)}`],t[`color${E(a.color)}`]]}})(({theme:s,ownerState:t})=>{const a=s.palette.mode==="light"?s.palette.grey[100]:s.palette.grey[900];return f({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},t.position==="fixed"&&{position:"fixed",zIndex:(s.vars||s).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},t.position==="absolute"&&{position:"absolute",zIndex:(s.vars||s).zIndex.appBar,top:0,left:"auto",right:0},t.position==="sticky"&&{position:"sticky",zIndex:(s.vars||s).zIndex.appBar,top:0,left:"auto",right:0},t.position==="static"&&{position:"static"},t.position==="relative"&&{position:"relative"},!s.vars&&f({},t.color==="default"&&{backgroundColor:a,color:s.palette.getContrastText(a)},t.color&&t.color!=="default"&&t.color!=="inherit"&&t.color!=="transparent"&&{backgroundColor:s.palette[t.color].main,color:s.palette[t.color].contrastText},t.color==="inherit"&&{color:"inherit"},s.palette.mode==="dark"&&!t.enableColorOnDark&&{backgroundColor:null,color:null},t.color==="transparent"&&f({backgroundColor:"transparent",color:"inherit"},s.palette.mode==="dark"&&{backgroundImage:"none"})),s.vars&&f({},t.color==="default"&&{"--AppBar-background":t.enableColorOnDark?s.vars.palette.AppBar.defaultBg:M(s.vars.palette.AppBar.darkBg,s.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?s.vars.palette.text.primary:M(s.vars.palette.AppBar.darkColor,s.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?s.vars.palette[t.color].main:M(s.vars.palette.AppBar.darkBg,s.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?s.vars.palette[t.color].contrastText:M(s.vars.palette.AppBar.darkColor,s.vars.palette[t.color].contrastText)},!["inherit","transparent"].includes(t.color)&&{backgroundColor:"var(--AppBar-background)"},{color:t.color==="inherit"?"inherit":"var(--AppBar-color)"},t.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),Ko=c.forwardRef(function(t,a){const e=to({props:t,name:"MuiAppBar"}),{className:r,color:p="primary",enableColorOnDark:u=!1,position:d="fixed"}=e,h=eo(e,qo),i=f({},e,{color:p,position:d,enableColorOnDark:u}),g=Yo(i);return o.jsx(Jo,f({square:!0,component:"header",ownerState:i,elevation:4,className:ao(g.root,r,d==="fixed"&&"mui-fixed"),ref:a},h))}),Xo=B(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10h5v-2h-5c-4.34 0-8-3.66-8-8s3.66-8 8-8 8 3.66 8 8v1.43c0 .79-.71 1.57-1.5 1.57s-1.5-.78-1.5-1.57V12c0-2.76-2.24-5-5-5s-5 2.24-5 5 2.24 5 5 5c1.38 0 2.64-.56 3.54-1.47.65.89 1.77 1.47 2.96 1.47 1.97 0 3.5-1.6 3.5-3.57V12c0-5.52-4.48-10-10-10m0 13c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3"}),"AlternateEmail"),Zo=B(o.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth"),os=B(o.jsx("path",{d:"M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25m6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8"}),"Face"),ss=B(o.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),ts=B(o.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),es=({dispatch:s,deleteMenuAnchor:t})=>{const{isDeleteMenu:a,selectedDeleteChat:e}=C(m=>m.misc),r=e.groupChat,p=z(),[u,,d]=R(no),[h,,i]=R(io),g=()=>{s(V(!1)),t.current=null},j=()=>{g(),h("Leaving Group...",e.chatId)},n=()=>{g(),u("deleting Chat...",e.chatId)};return c.useEffect(()=>{(d||i)&&p("/")},[d,i]),o.jsx(Ho,{open:a,onClose:g,anchorEl:t.current,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"center"},children:o.jsx(k,{sx:{width:"10rem",padding:"0.5rem",cursor:"pointer"},direction:"row",alignItems:"center",spacing:"0.5rem",onClick:r?j:n,children:e.groupChat?o.jsxs(o.Fragment,{children:[" ",o.jsx(Go,{})," ",o.jsx(v,{children:"Leave Group"})," "]}):o.jsxs(o.Fragment,{children:[o.jsx(Oo,{}),o.jsx(v,{children:"Delete Chat"})]})})})},as=({title:s="chat App",description:t="this is chat app"})=>o.jsxs(co,{children:[o.jsx("title",{children:s}),o.jsx("meta",{name:"description ",content:t})]}),rs=({avatar:s=[],name:t,_id:a,groupChat:e,newMessageAlert:r,sameSender:p,isOnline:u,index:d=0,handleDeleteChat:h})=>o.jsx(lo,{sx:{padding:"0"},to:`/chat/${a}`,onContextMenu:i=>h(i,a,e),children:o.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"centre",padding:"1rem",backgroundColor:p?"black":"unset",color:p?"white":"unset",position:"relative",padding:"1rem"},children:[o.jsx(Po,{avatar:s}),o.jsxs(k,{children:[o.jsx(v,{children:t}),r&&o.jsxs(v,{children:[r.count," New Message"]})]}),u&&o.jsx(A,{sx:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"green",position:"absolute",top:"50%",right:"1rem",transform:"translateY(-50%)"}})]})}),ns=c.memo(rs),P=({w:s="100%",chats:t=[],chatId:a,onlineUsers:e=[],newMessagesAlert:r=[{chatId:"",count:0}],handleDeleteChat:p})=>o.jsx(k,{width:s,direction:"column",overflow:"auto",height:"100%",children:t==null?void 0:t.map((u,d)=>{const{avatar:h,_id:i,name:g,groupChat:j,members:n}=u,m=r.find(({chatId:b})=>b===i),l=n==null?void 0:n.some(b=>e.includes(b));return o.jsx(ns,{index:d,newMessageAlert:m,isOnline:l,avatar:h,name:g,_id:i,groupChat:j,sameSender:a===i,handleDeleteChat:p},i)})}),is=({user:s})=>{var t;return o.jsxs(k,{spacing:"2rem",direction:"column",alignItems:"center",children:[o.jsx(Vo,{src:po((t=s==null?void 0:s.avatar)==null?void 0:t.url),sx:{width:200,height:200,objectFit:"contain",marginBottom:"1rem",border:"5px solid white"}}),o.jsx(D,{heading:"Bio",text:s==null?void 0:s.bio}),o.jsx(D,{heading:"username",text:s==null?void 0:s.username,Icon:o.jsx(Xo,{})}),o.jsx(D,{heading:"Name",text:s==null?void 0:s.name,Icon:o.jsx(os,{})}),o.jsx(D,{heading:"joined",text:ho(s==null?void 0:s.createdAt).fromNow(),Icon:o.jsx(Zo,{})})]})},D=({text:s,Icon:t,heading:a})=>o.jsxs(k,{direction:"row",alignItems:"centre",spacing:"1rem",color:"white",textAlign:"centre",children:[t&&t,o.jsxs(k,{children:[o.jsx(v,{variant:"body1",children:s}),o.jsx(v,{color:"gray",variant:"caption",children:a})]})]}),cs=c.lazy(()=>_(()=>import("./Search-Yx16P7CN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),ls=c.lazy(()=>_(()=>import("./Notifications-BNyzYUVM.js"),__vite__mapDeps([21,1,3,4,5,13,8,7,9,10,22]))),ps=c.lazy(()=>_(()=>import("./NewGroup-DKaL_awX.js"),__vite__mapDeps([23,1,6,7,8,4,9,10,5,11,12,2,3,13,14,22]))),ds=()=>{const{isSearch:s,isNewGroup:t,isNotification:a}=C(n=>n.misc),{NotificationCount:e}=C(n=>n.chat),r=F(),p=z(),u=()=>{r(S(!0))},d=()=>{r(uo(!0))},h=()=>{r(go(!0))},i=()=>{r(mo(!0)),r(jo())},g=()=>p("/groups"),j=async()=>{var n,m;try{const{data:l}=await vo.get(`${fo}/api/v1/user/logout`,{withCredentials:!0});r(Co()),H.success(l.message)}catch(l){H.error((m=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:m.message)}};return o.jsxs(o.Fragment,{children:[o.jsx(A,{sx:{flexGrow:1},height:"4rem",children:o.jsx(Ko,{position:"static",sx:{bgcolor:xo},children:o.jsxs(So,{children:[o.jsx(v,{variant:"h6",sx:{display:{xs:"none",sm:"block"}},children:"chat App"}),o.jsx(A,{sx:{display:{xs:"block",sm:"none"}},children:o.jsx($,{color:"inherit",onClick:u,children:o.jsx(zo,{})})}),o.jsx(A,{sx:{flexGrow:1}}),o.jsxs(A,{children:[o.jsx(I,{title:"Search",icon:o.jsx(ts,{}),onClick:d}),o.jsx(I,{title:"New Group",icon:o.jsx(Ro,{}),onClick:h}),o.jsx(I,{title:"Mange Groups",icon:o.jsx(Uo,{}),onClick:g}),o.jsx(I,{title:"Notification",icon:o.jsx(wo,{}),onClick:i,value:e}),o.jsx(I,{title:"Logout",icon:o.jsx(ss,{}),onClick:j})]})]})})}),s&&o.jsx(c.Suspense,{fallback:o.jsx(N,{open:!0}),children:o.jsx(cs,{})}),a&&o.jsx(c.Suspense,{fallback:o.jsx(N,{open:!0}),children:o.jsx(ls,{})}),t&&o.jsx(c.Suspense,{fallback:o.jsx(N,{open:!0}),children:o.jsx(ps,{})})]})},I=({title:s,icon:t,onClick:a,value:e})=>o.jsx(Wo,{title:s,children:o.jsx($,{color:"inherit",size:"large",onClick:a,children:e?o.jsx($o,{badgeContent:e,color:"error",children:t}):t})}),Bs=()=>s=>t=>{const a=ko(),e=F(),r=a.chatId,p=c.useRef(null),u=bo(),d=z(),[h,i]=c.useState([]),{isMobile:g}=C(x=>x.misc),{user:j}=C(x=>x.auth),{newMessagesAlert:n}=C(x=>x.chat),{isLoading:m,data:l,isError:b,error:U,refetch:L}=Io("");c.useEffect(()=>{Ao({key:O,value:n})},[n]);const T=(x,K,X)=>{e(V(!0)),e(Mo({chatId:K,groupChat:X})),p.current=x.currentTarget},w=()=>e(S(!1)),W=c.useCallback(x=>{x.chatId!==r&&e(Bo(x))},[r]),Q=c.useCallback(()=>{e(yo())},[e]),q=c.useCallback(()=>{L(),d("/")},[L,d]),Y=c.useCallback(x=>{i(x)},[]),J={[O]:W,[Do]:Q,[Eo]:q,[No]:Y};return _o(u,J),Lo([{isError:b,error:U}]),o.jsxs(o.Fragment,{children:[o.jsx(as,{title:"chat App"}),o.jsx(ds,{}),o.jsx(es,{dispatch:e,deleteMenuAnchor:p}),m?o.jsx(G,{}):o.jsx(To,{open:g,onClose:w,children:o.jsx(P,{w:"70vw",chats:l==null?void 0:l.chats,chatId:r,handleDeleteChat:T,newMessagesAlert:n,onlineUsers:h})}),o.jsxs(y,{container:!0,height:"calc(100vh - 4rem)",children:[o.jsx(y,{item:!0,sm:4,md:3,sx:{display:{xs:"none",sm:"block"}},height:"100%",children:m?o.jsx(G,{}):o.jsx(P,{chats:l==null?void 0:l.chats,chatId:r,handleDeleteChat:T,newMessagesAlert:n,onlineUsers:h})}),o.jsx(y,{item:!0,xs:12,sm:8,md:5,lg:6,height:"100%",children:o.jsx(s,{...t,chatId:r,user:j})}),o.jsx(y,{item:!0,md:4,lg:3,height:"100%",sx:{display:{xs:"none",md:"block"},padding:"2rem",bgcolor:"rgba(0,0,0,0.85)"},children:o.jsx(is,{user:j})})]})]})};export{Bs as A,ts as S};
